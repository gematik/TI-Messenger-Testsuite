# language: de
@File:FeatureFile_03_ePA @Ctl:UseCaseEPA
@PRODUKT:TIM_ePA_11X
@AF-ID:AF_10064-02
@AK-ID:A_26017 @AK-ID:A_26018
@AF-ID:AF_10061-02
@AK-ID:A_26021 @AK-ID:A_25046
Funktionalität:  03. Föderationszugehörigkeit eines Messenger-Service prüfen

  AF_10064-02 - Föderationszugehörigkeit eines Messenger-Service prüfen
    A_26017 - AF_10064 - Matrix-Domain Teil der Föderationsliste & Aktualitätscheck
    A_26018 - AF_10064 - Aktualität - Föderationsliste Messenger-Proxy
   # ML-132589 - TI-M Rohdatenerfassung und -lieferung

  #muss nochmal betrachtet werden, welche Punkte hier zutreffeb
  AF_10061-02 - Einladung von Akteuren außerhalb einer Organisation
    A_26021 - Durchsetzung der Berechtigungskonfiguration - Fachdienst
    A_25046 - Durchsetzung der Berechtigungskonfiguration - Client

  Inhalt
  TF 1  Versicherter versucht User außerhalb der Föderation einzuladen (Chat)
  TF 2  Versicherter versucht User außerhalb der Föderation einzuladen (Raum)

  @BP:V2N @Ctl:Chat @Ctl:MsgForward
  @TCID:TIM_ePA_AF_0601 @PRIO:1 @TESTFALL:Negativ @STATUS:Zurückgestellt
  Szenariogrundriss: 06.01 Föderationszugehörigkeit prüfen - Chat - Test-Client "A" versucht User außerhalb der Föderation einzuladen (Versicherter)
    Angenommen Es werden folgende Clients reserviert:
      | A | INSURANT | <ApiName1> |
    Wenn       "A" versucht der MXID "@tim-gematik:matrix.org" direkt "Testnachricht 1" zu schreiben
    Dann       erhält "A" einen Responsecode 403

  @Shuffle(true)
  @MaxSameColumnProperty(ApiName1,homeserver,1)
  @Filter(ApiName1.hasTag("client"))
  @Filter(ApiName1.hasTag("insurant"))

    Beispiele:
    | ApiName1 |

  @BP:V2N @Ctl:Raum
  @TCID:TIM_ePA_AF_0602 @PRIO:1 @TESTFALL:Negativ @STATUS:Zurückgestellt
  Szenariogrundriss: 06.02 Föderationszugehörigkeit prüfen - Raum - Test-Client "A" versucht User außerhalb der Föderation einzuladen (Versicherter)
    Angenommen Es werden folgende Clients reserviert:
      | A | INSURANT    | <ApiName1> |
    Und        "A" erstellt einen Chat-Raum "TIM Testraum 1"
    Und        "A" versucht die MXID "@tim-gematik:matrix.org" in den Chat-Raum "TIM Testraum 1" einzuladen
    Dann       erhält "A" einen Responsecode 403

  @Shuffle(true)
  @MaxSameColumnProperty(ApiName1B,homeserver,1)
  @EqualProperty(homeserver)
  @Filter(ApiName1.hasTag("client"))
  @Filter(ApiName1.hasTag("insurant"))

    Beispiele:
    | ApiName1 |