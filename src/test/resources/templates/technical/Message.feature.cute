@Ctl:Technical
Feature: Message operations

  Scenario Outline: Send a message between two accounts
    Given "A" claims a device at interface <ApiName1> with user name "Dr. Müller"
    And "B" claims a device at interface <ApiName1> with user name "Dr. Meier"
    And "A" creates a room with name "MyRoom"
    And "A" invites "B" into room "MyRoom"
    And "B" accepts the invitation to room "MyRoom"
    When "A" sends message "hello world" in room "MyRoom"
    Then "B" can see message "hello world" from "A" in room "MyRoom"

    @Filter(ApiName1.hasTag("client"))
    Examples:
      | ApiName1 |

  Scenario Outline: edit a message
    Given "A" claims a device at interface <ApiName1> with user name "Dr. Müller"
    And "A" creates a room with name "MyRoom"
    And "A" sends message "hello universe" in room "MyRoom"
    And "A" sends message "hello world" in room "MyRoom"
    When "A" edits her last sent message in room "MyRoom" to "edit world"
    Then "A" can see messages "hello universe", "edit world" from "A" in room "MyRoom"

    @Filter(ApiName1.hasTag("client"))
    Examples:
      | ApiName1 |

  Scenario Outline: delete a message
    Given "A" claims a device at interface <ApiName1> with user name "Dr. Müller"
    And "A" creates a room with name "MyRoom"
    And "A" sends message "hello world" in room "MyRoom"
    When "A" deletes her last sent message in room "MyRoom"
    Then "A" sees 0 messages in room "MyRoom"

    @Filter(ApiName1.hasTag("client"))
    Examples:
      | ApiName1 |
