@Ctl:Technical
Feature: Room operations

  Scenario Outline: Invite 3 accounts to room and check status
    Given "A" claims a device at interface <ApiName1> with user name "Dr. M端ller"
    And "B" claims a device at interface <ApiName1> with user name "Dr. Meier"
    And "C" claims a device at interface <ApiName1> with user name "Prof. Klug"
    When "A" creates a room with name "MyRoom"
    And "A" invites "B", "C" into room "MyRoom"
    And "B" accepts the invitation to room "MyRoom"
    Then the room "MyRoom" has 2 JOINED members
    And the room "MyRoom" has 1 INVITED members

    @Filter(ApiName1.hasTag("client"))
    Examples:
      | ApiName1 |

  Scenario Outline: Room with 3 members. One leaves
    Given "A" claims a device at interface <ApiName1> with user name "Dr. M端ller"
    And "B" claims a device at interface <ApiName1> with user name "Dr. Meier"
    And "C" claims a device at interface <ApiName1> with user name "Prof. Klug"
    When "A" creates a room with name "LeaveRoom"
    And "A" invites "B", "C" into room "LeaveRoom"
    And "B" accepts the invitation to room "LeaveRoom"
    And "B" leave room with name "LeaveRoom"
    Then the room "LeaveRoom" of "A" have 2 members
    And the room "LeaveRoom" has 1 INVITED members

    @Filter(ApiName1.hasTag("client"))
    Examples:
      | ApiName1 |

  Scenario Outline: Deny invitation
    Given "A" claims a device at interface <ApiName1> with user name "Dr. M端ller"
    And "B" claims a device at interface <ApiName1> with user name "Dr. Meier"
    When "A" creates a room with name "DenyInvitationRoom"
    And "A" invites "B" into room "DenyInvitationRoom"
    And "B" deny room invitation to "DenyInvitationRoom"
    Then the room "DenyInvitationRoom" of "A" have 1 members
    And the room "DenyInvitationRoom" has 0 INVITED members
    And the room "DenyInvitationRoom" has 1 JOINED members

    @Filter(ApiName1.hasTag("client"))
    Examples:
      | ApiName1 |

  Scenario Outline: Delete room with all members and messages
    Given "A" claims a device at interface <ApiName1> with user name "Dr. M端ller"
    And "B" claims a device at interface <ApiName1> with user name "Dr. House"
    When "A" creates a room with name "DeleteRoom"
    And "A" invites "B" into room "DeleteRoom"
    And "B" accepts the invitation to room "DeleteRoom"
    And "B" leave room with name "DeleteRoom"
    And "A" sends message "hello universe" in room "DeleteRoom"
    And "A" deletes room "DeleteRoom"
    Then "B" should have 0 rooms

    @Filter(ApiName1.hasTag("client"))
    Examples:
      | ApiName1 |
